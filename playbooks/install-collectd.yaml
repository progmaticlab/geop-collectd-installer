---

- name: setup collectd
  hosts: all
  tasks:

  - name: Install collectd
    package:
      name: collectd
      state: present

  - name: create collectd.conf
    copy:
      src: roles/collectd/templates/collectd.conf
      dest: /etc/collectd/collectd.conf

  - name: restart collectd
    ansible.builtin.systemd:
      state: restarted
      daemon_reload: yes
      name: collectd
